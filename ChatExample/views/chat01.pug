extends layout

block content
  h3 채팅 클라이언트 01
  div
    input(type="text" id="hostInput" value="localhost")
    input(type="text" id="portInput" value="3000")
    button(id="connectButton")  연결하기
  hr
  p 결과
  #result
    

  script.
    var host;
    var port;
    var socket;

    -// 문서 로딩 후 실행됨
    $(function() {
    
      $("#connectButton").bind('click', function(event) {
        println('connectButton이 클릭되었습니다.');
      
        host = $('#hostInput').val();
        port = $('#portInput').val();
              
        connectToServer();
      });
    });
            
    -// 서버에 연결하는 함수 정의
    function connectToServer() {
    
      var options = {'forceNew':true};
      var url = 'http://' + host + ':' + port;
      socket = io.connect(url, options);
    
      socket.on('connect', function() {
        println('웹소켓 서버에 연결되었습니다. : ' + url);
      });
      
      socket.on('disconnect', function() {
        println('웹소켓 연결이 종료되었습니다.');
      });
        
    }
        
    function println(data) {
      console.log(data);
      $('#result').append('<p>' + data + '</p>');
    }
              
